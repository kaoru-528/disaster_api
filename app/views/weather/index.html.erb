<h1>降水確率の平均</h1>
<%= form_with url: weather_index_path, method: :get, local: true do |f| %>
  <div>
    <label>地域を選択:</label>
    <%= f.select :region_code, options_for_select([
      ['東京(八王子)', '130010'],
      ['大阪', '270000'],
      ['名古屋', '230000'],
      ['札幌', '016010'],
      ['仙台', '040010'],
      ['福岡', '400010'],
      ['広島', '340010'],
      ['新潟', '150010'],
      ['鹿児島', '460010']
    ], selected: params[:region_code] || '130010') %>

    <%= f.submit '天気を取得' %>
  </div>
<% end %>

<% if @average_precipitation %>
  <p>選択地域の平均降水確率: <%= @average_precipitation %>%</p>
<% else %>
  <p>データが取得できませんでした。</p>
<% end %>